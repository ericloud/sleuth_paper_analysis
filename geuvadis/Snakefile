
def source_r(base, fname):
    return 'Rscript --vanilla -e \'setwd("{0}")\' -e \'source("{1}")\''.format(base, fname)

rule all:
    input:
        'metadata/geu_meta.RData',
        'results/prep_fin.RData'

rule geuvadis_metadata:
    output:
        'metadata/geu_meta.RData'
    shell:
        source_r('R', 'metadata.R')

rule prep_finnish_samples:
    input:
        'metadata/geu_meta.RData'
    output:
        'results/prep_fin.RData'
    shell:
        source_r('R', 'mean_disp_pairs.R')

rule gen_sim_script:
    input:
        'results/prep_fin.RData'
    output:
        'sims/{n_a}_{n_b}_{n_sim}/de.txt'
    shell:
        source_r('R', 'gen_sim.R') + ' {n_sim} {n_a} {n_b}'



